![[Screenshot 2024-05-30 at 17.42.25.png]]
[ISO/IEC 25010:2011](<https://iso25000.com/index.php/en/iso-25000-standards/iso-25010?fbclid=IwAR00hgZD-eRTYoSsLezOy0J6TsytVAZiN9H39BpqSOlWEwG6uiBJGyrcH0Q&start=5>)

>[!warning] ЭТО ПЛОХОЕ ОПРЕДЕЛЕНИЕ
>**Уязвимость** - свойство продукта/системы, позволяющее умышленно:
>- намеренно нарушить его/её целостность;
>- вызвать его/её неправильную работу

# Основные понятия

Как правила, имеют в виду security vulnerability
- Проблема безопастности
- Должна позволять атакующему сделать что-то большее, чем он мог без неё
- Должна оставаться актуальной при правильной 

Функция GetLocalTime()
- Получает текущие дату и время
- Единственный параметр – указатель на переменную типа SYSTEMTIME.

Если передать параметром **nil**, внутри функции произойдёт Access Violation

## Анализ уязвимости
1) Кто атакует?
2) Кто жертва атаки?
	1) Разные ли это уровни привилегий?
3) Чего добивается атакующий?
4) В чём причина уязвимости?
	1) Ошибка в каком компоненте приводит к уязвимости?

## Уровни привелегий
Примеры:
- сценарий, встроенный в web-страницу
- прикладная программа, выполняющаяся от имени обычного пользователя
- прикладная программа, выполняющаяся с правами администратора
- драйвер

﻿﻿«Критическая уязвимость стандарта USB»
- USB-контроллер внутри флешки можно перепрограммировать, чтобы она определялась как:
	- клавиатура;
	- сетевая карта; о и т.П.
- При подключении к компьютеру её можно использовать для атак.

# Meltdown Spectre

>«Любой микропроцессор корпорации Intel, реализующий внеочередное исполнение, потенциально подвержен атаке, т.е. любой процессор с 1995 года (за исключением Intel Itanium и Intel Atom, выпущенных до 2013 года)»

Принцип в основе обеих атак одни и те же
- отличия в деталях реализации

Что нужно знать и понимать?
- кэш
- конвеер
- предсказания
- protected mode
- система команд процессора

1) B IA-32 есть инструкции, которые обращаются к памяти по адресу, зависящему от значения в памяти:
	- jmp \[ mem \]
	- ret

2) Инструкции могут выполняться не в том порядке, в котором записаны в программе
3) Если предсказатель переходов ошибается:
	- в конвейер попадают инструкции, которые не должны были выполняться
4) Количество этапов в конвейерах современных процессоров достигает 10 и более
	- Правильность предсказания становится известной, когда проверка условия доходит до поздних этапов.
	- Загрузка операндов происходит на ранних этапах.
	- Проверки прав доступа осуществляются параллельно с этим.


------------------------

1) ﻿﻿﻿Выбросить из кэша адреса А1, и А2
2) Натренировать предсказатель переходов
3) Выполнить условный переход
4) В ветви, которая не выполняется:
	1) выполнить команду, которая читает данные по адресу Apr
	2) использовать данные по адресу Арг для вычисления А1, Либо А2
	3) обратиться по вычисленному адресу
5) Измерить время обращения к А1 и к А2


Предсказание переходов ошибается
Начинается выполнение неправильной ветви
- в ней есть инструкция с двойным обращением к памяти
- она помещается в конвейер и начинается загрузка её операндов (сначала – значение ..)

Как можно атаковать?
- desktop-приложение, содержащее необходимый фрагмент кода
- web-приложение, содержащее сценарий

/-------------------------------------------------\
|--Операционная система--------------|
|--|-> ...  ---------------------------------------|
|--|-> web-браузер ------------------------|
|-------|-> JavaScript-сценарий----------|
\\-------------------------------------------------/

/-------------------------------------------------\
|--Операционная система------------- |
|--|-> ... --------------------------------------- |
|--|->Desktop-приложение -------------|
\\-------------------------------------------------/


### Проблемы meltdonw spectre
Требуется возможность надёжно выполнить сброс кэш-линии
- для этого в IA-32 есть специальные иснтрукции
- но из JS их не выполнить
- а ещё они могут выполниться и другим кодом
	- например, ОС при переключении контекстов

Требуется контроль над кодом на уровне машинного кода
- С точностью до такта конвейера
- В случае с JS это сложно т.к. каждая реализация генерирует код по-своему
	- Использование одного движка разными браузерами упрощает задачу
- В языках высокого уровня сложно

Позволяет читать только страницы из адресного пространства того же процессора
- Т.е. приложение может прочитать свои же данные...
- ... или данные ОС, размещённые в памяти этой же программы
	- позволяет некоторым функциям ОС выполняться быстрее


Применяемые исправления:
- обновления микрокода процессора
- обновления ОС
Последствия:
- в процессоре ограничивается аппаратная реализация
- замедление работы

Meltdown и Spectre используют время доступа к памяти:
 - Оптимизированные операции- потребляющие меньше ресурсов
 - Вместо времени доступа можно использовать темепературные датчики и измерять количество выделившейся тепловой энергии
 - Или изменения магнитного поля

Analog hole - если у пользователя уже есть доступ к информации, её никак нельза защитить, потому что в физическом мире человек может
- записать
- запомнить
- сфотографировать
- и т.д.