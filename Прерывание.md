
Прерывание - инициируемый определённым образом процесс, временно переключающий процессор на выполнение другой программы с последующим возобновлением выполнения прерванной программы

Обработчик прерывания - программа, которой передаётся управление при возникновении прерывания

Прерывания:
- аппаратные
- программные

Intel:
- предусмотрено 256 номеров прерываний
- 0-31 (00-1F) зарезервированы, остальные доступны для программистов


IVT - Interrupt Vector Table
- Находится по адресу 0000:0000
- Представляет собой массив полных адресов обработчиков прерываний
	- 2 байта - смещение;
	- 2 байта - сегмант.
- Индекс в массиве - номер прерывания

Могут возникнуть:
- при выполнении недопустимой инструкции:
	- деление на 0
	- несуществующая инструкция
	- и т.п.
- при использовании программой команды int

Для возврата управления из обработчика прерывания используется команда iret
- в отичии от ret/retf всегда без операндов


ФЛАГ IF

Кроме сохранения FLAGS и CS:IP, при вызове обработчика флаг IF устанавливается в 0:
- IF=0: обработка прерываний запрещена
- IF=1: обработка прерываний разрешена

Аппаратные прерывания возникают при поступлении сигналов от внешних устройств
- Номер прерывания выбирается в зависимости от источника сигнала
- Выполнение основной программы приостанавливается
- Выполняются те же действия, что и при использовании инструкции int

Процессор гарантирует, что текущая инструкция будет выполнена до передачи управления ISR.

Если прерывание аппаратное, обработчик, как правило, должен сохранить значение регистров

Подмена обработчика позволяет включиться в процесс обработки прерывания


Перехват прерывания
```Assembly
xor ax, ax
mov es, ax

mov cx, Segment
mov dx, Offset

cli
mov [es:IntNumber * 4], cx
mov [es:IntNumber * 4 + 2], dx
sti
```

Есть функции MS-DOS, позволяющие выполнить перехват прерываний
- Функция 35h возвращает адрес обработчика
- Функция 25h заменяет адрес обработчика на заданный(выполняет перехват)

В зависимости от того, какое прерывание обрабатывается, обработчик может:
- выполнять всю обработку самостоятельно;
- вызывать предыдущий обработчик в процессе обработки (в т.ч. после)